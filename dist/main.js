(()=>{"use strict";let t=[];function e(){const e=localStorage.getItem("tasks");e&&(t=JSON.parse(e))}function n(){t.forEach(((t,e)=>{t.index=e})),localStorage.setItem("tasks",JSON.stringify(t))}function a(){e();const n=document.getElementById("todo-list");n.innerHTML="",t.sort(((t,e)=>t.index-e.index)),t.forEach(((e,d)=>{const c=document.createElement("li"),o=document.createElement("div"),s=document.createElement("input"),i=document.createElement("span"),l=document.createElement("i");s.type="checkbox",s.checked=e.completed,s.addEventListener("change",(function(e){const n=parseInt(i.dataset.index),d=e.target.checked;i.className="",function(e,n){const a=t.find((t=>t.index===e));a&&(a.completed=n,localStorage.setItem("tasks",JSON.stringify(t)))}(n,d),a()})),i.textContent=e.description,i.className=e.completed?"completed":"",i.dataset.index=d,i.setAttribute("contenteditable",!e.completed),o.className="task-item",o.appendChild(s),o.appendChild(i),l.className="fas fa-trash-alt text-danger float-end delete-button",c.appendChild(o),c.appendChild(l),n.appendChild(c)}))}document.getElementById("add-task-form").addEventListener("submit",(e=>{e.preventDefault(),function(e){const n={description:document.getElementById("task-input").value,completed:!1,index:t.length};t.push(n),localStorage.setItem("tasks",JSON.stringify(t))}(),a(),document.getElementById("task-input").value=""})),document.addEventListener("click",(function(e){if(e.target.classList.contains("delete-button")){const c=e.target.parentNode;d=parseInt(c.querySelector("span").dataset.index),t.splice(d,1),n(),localStorage.setItem("tasks",JSON.stringify(t)),c.remove(),a()}var d})),document.addEventListener("input",(function(e){if("SPAN"===e.target.tagName){const n=e.target;!function(e,n){const a=t.find((t=>t.index===e));a&&(a.description=n,localStorage.setItem("tasks",JSON.stringify(t)))}(parseInt(n.dataset.index),n.textContent.trim())}})),document.addEventListener("blur",(function(t){"SPAN"===t.target.tagName&&a()})),document.getElementById("clear-completed-button").addEventListener("click",(()=>{!function(){const e=t.filter((t=>!t.completed));t.length=0,Array.prototype.push.apply(t,e),n(),localStorage.setItem("tasks",JSON.stringify(t))}(),a()})),document.addEventListener("DOMContentLoaded",(function(){e(),a()}))})();